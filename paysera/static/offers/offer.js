window.addEventListener("load",function(){var a=function(e){var r=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),t=0;t<a.length;t++){var s=jQuery.trim(a[t]);if(s.substring(0,e.length+1)===e+"="){r=decodeURIComponent(s.substring(e.length+1));break}}return r}("csrftoken");function r(e,r,a,t,s,l,o,d,i){this.formId=$(e),this.priceId=$(r),this.amountId=$(a),this.priceErrorId=$(t),this.amountErrorId=$(s),this.messageAreaId=$(l),this.extraMessageId=$(o),this.extraMessageErrorId=$(d),this.url=i}$.ajaxSetup({beforeSend:function(e,r){(function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)})(r.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",a)}});var e=$("#buyOffer"),t=$("#sellOffer"),s=$("#contanctId"),o=!0,d=!0,i=!1,l=$("#contactForm"),n=$("#contactMessageError"),c=$("#contactMessageArea"),m=$("#contactMessage"),u=!0;function g(e){window.grecaptcha.reset(0),window.grecaptcha.reset(1),e.formId.trigger("reset"),e.priceErrorId.removeClass().text(""),e.amountErrorId.removeClass().text(""),e.extraMessageErrorId.removeClass().text(""),e.messageAreaId.removeClass().text(""),e.priceId.change(function(){e.messageAreaId.removeClass().text(""),(o=!Number(e.priceId.val())||Number(e.priceId.val())<=0)?(e.priceErrorId.text("invalid price"),e.priceErrorId.removeClass("alert alert-success").addClass("alert alert-danger")):(e.priceErrorId.text("valid price"),e.priceErrorId.removeClass("alert alert-danger").addClass("alert alert-success"))}),e.amountId.change(function(){e.messageAreaId.removeClass().text(""),(d=!Number(e.amountId.val())||Number(e.amountId.val())<=0)?(e.amountErrorId.text("invalid amount"),e.amountErrorId.removeClass("alert alert-success").addClass("alert alert-danger")):(e.amountErrorId.text("valid amount"),e.amountErrorId.removeClass("alert alert-danger").addClass("alert alert-success"))}),e.extraMessageId.change(function(){e.messageAreaId.removeClass().text(""),(i=250<e.extraMessageId.val().length)?e.extraMessageErrorId.text("invalid message.").removeClass("alert alert-success").addClass("alert alert-danger"):e.extraMessageErrorId.text("accepted.").removeClass("alert alert-danger").addClass("alert alert-success")})}function f(l){l.formId.submit(function(e){if(e.preventDefault(),$(".offer-submit").attr("disabled","disabled"),o||d||i){l.messageAreaId.text("invalid Data , please check it again.").removeClass("alert alert-primary").addClass("alert alert-danger"),$(".offer-submit").removeAttr("disabled")}else $.ajax({type:"POST",url:l.url,data:$(this).serialize(),success:function(e,r,a){if(e.error){var t=e.errorMsg;l.messageAreaId.text(t).removeClass("alert alert-primary").addClass("alert alert-danger"),$(".offer-submit").removeAttr("disabled")}else{var s=e.message;l.formId.trigger("reset"),l.priceErrorId.removeClass().text(""),l.amountErrorId.removeClass().text(""),l.extraMessageErrorId.removeClass().text(""),l.messageAreaId.text(s).removeClass("alert alert-danger").addClass("alert alert-primary"),$(".offer-submit").removeAttr("disabled")}},error:function(e,r,a){console.log("Error with status : "+r),$(".offer-submit").removeAttr("disabled")}}),window.grecaptcha.reset(0),window.grecaptcha.reset(1)})}e.click(function(){var e=new r("#buyForm","#buyPrice","#buyAmount","#buyPriceError","#buyAmountError","#messageAreaBuy","#messageBuy","#messageErrorBuy","/offers/buy/");g(e),f(e)}),t.click(function(){var e=new r("#sellForm","#sellPrice","#sellAmount","#sellPriceError","#sellAmountError","#messageAreaSell","#messageSell","#messageErrorSell","/offers/sell/");g(e),f(e)}),s.click(function(){!function(e,r,a,t){window.grecaptcha.reset(2),e.trigger("reset"),r.removeClass().text(""),a.removeClass().text(""),t.change(function(){r.removeClass().text(""),(u=t.val().length<50||380<t.val().length||0==t.val().length)?a.text("invalid message.").removeClass("alert alert-success").addClass("alert alert-danger"):a.text("accepted.").removeClass("alert alert-danger").addClass("alert alert-success")})}(l,c,n,m),function(l,o,d){l.submit(function(e){if(e.preventDefault(),$(".offer-submit").attr("disabled","disabled"),u){o.text("invalid Data , please check it again.").removeClass("alert alert-primary").addClass("alert alert-danger"),$(".offer-submit").removeAttr("disabled")}else $.ajax({type:"POST",url:"/notification/message/",data:$(this).serialize(),success:function(e,r,a){if(e.error){var t=e.errorMsg;o.text(t).removeClass("alert alert-primary").addClass("alert alert-danger"),$(".offer-submit").removeAttr("disabled")}else{var s=e.message;l.trigger("reset"),d.removeClass().text(""),o.text(s).removeClass("alert alert-danger").addClass("alert alert-primary"),$(".offer-submit").removeAttr("disabled")}},error:function(e,r,a){console.log("Error with status : "+r),$(".offer-submit").removeAttr("disabled")}}),window.grecaptcha.reset(2)})}(l,c,n)})},!0);
